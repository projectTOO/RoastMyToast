<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="shortcut icon" href="./img/fav.png">
    <!-- style -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,400i,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <!-- animsition.css -->
    <link rel="stylesheet" href="./dist/css/animsition.min.css">
    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!-- animsition.js -->
    <script src="./dist/js/animsition.min.js"></script>

    <title>Roast My Toast</title>
</head>

<body>
    <div class="switch">Dark mode:
        <span class="inner-switch">OFF</span></div>
    <img id="headerLogo" src="./img/rmt_logo_trans.png">
    <br>
    <div class="animsition">
        <a href="./submit.html" class="animsition-link"><img src="./img/new.svg" class="icon" alt="New Post"></a>
        <br><br><br>

        <div class="postContainer">
            <!-- posts go here -->
        </div>
        
        <script>
            var data;

            function getRecipes() {
                var userID;

                $.get("/api/recipes", function (data) {
                    for (var i = 0; i < data.length; i++) {
                        var row = $(".postContainer");
                        row.addClass("aPost");
                        row.append("<hr><h3>" + data[i].title + "</h3>");
                        row.append(`<p id='fillmein${i}'></p>`);
                        row.append("<p class='tiny'>Category: " + data[i].category + "</p>");
                        userID = data[i].UserId;
                        row.append("<img src='" + data[i].image_url + "' width=400>");


                        // row.append(`<p><a href='/api/recipes/:${data[i].id}'>${"See Full Recipe"}</a><hr>`);



                        var dataName = "";

                        $.get("/api/users/" + userID, function (data2) {
                            dataName = data2.name;
                            $('#fillmein' + (data2.id - 1)).text(dataName)
                        })
                    }
                });
            }
            getRecipes();



        </script>
</body>
<script src="js/js.js"></script>

</html>